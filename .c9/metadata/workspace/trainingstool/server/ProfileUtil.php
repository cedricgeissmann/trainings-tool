{"filter":false,"title":"ProfileUtil.php","tooltip":"/trainingstool/server/ProfileUtil.php","undoManager":{"mark":100,"position":100,"stack":[[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":104,"column":22},"end":{"row":104,"column":23}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":104,"column":23},"end":{"row":104,"column":24}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":104,"column":24},"end":{"row":104,"column":25}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":104,"column":25},"end":{"row":104,"column":26}},"text":"m"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":104,"column":26},"end":{"row":104,"column":27}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":107,"column":40},"end":{"row":107,"column":46}},"text":"teamID"},{"action":"insertText","range":{"start":{"row":107,"column":40},"end":{"row":107,"column":41}},"text":"u"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":107,"column":41},"end":{"row":107,"column":42}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":107,"column":42},"end":{"row":107,"column":43}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":107,"column":43},"end":{"row":107,"column":44}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":107,"column":44},"end":{"row":107,"column":45}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":107,"column":45},"end":{"row":107,"column":46}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":107,"column":46},"end":{"row":107,"column":47}},"text":"m"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":107,"column":47},"end":{"row":107,"column":48}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":104,"column":28},"end":{"row":104,"column":34}},"text":"the id"},{"action":"insertText","range":{"start":{"row":104,"column":28},"end":{"row":104,"column":29}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":104,"column":29},"end":{"row":104,"column":30}},"text":"h"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":104,"column":30},"end":{"row":104,"column":31}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":104,"column":31},"end":{"row":104,"column":32}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":104,"column":32},"end":{"row":104,"column":33}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":104,"column":33},"end":{"row":104,"column":34}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":104,"column":34},"end":{"row":104,"column":35}},"text":"m"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":104,"column":35},"end":{"row":104,"column":36}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":104,"column":44},"end":{"row":104,"column":45}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":104,"column":44},"end":{"row":104,"column":45}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":104,"column":44},"end":{"row":104,"column":45}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":104,"column":44},"end":{"row":104,"column":45}},"text":"m"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":104,"column":44},"end":{"row":104,"column":45}},"text":"u"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":104,"column":45},"end":{"row":104,"column":46}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":104,"column":46},"end":{"row":104,"column":47}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":104,"column":47},"end":{"row":104,"column":48}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":105,"column":37},"end":{"row":105,"column":48}},"text":"in the team"},{"action":"insertText","range":{"start":{"row":105,"column":37},"end":{"row":105,"column":38}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":105,"column":38},"end":{"row":105,"column":39}},"text":"h"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":105,"column":39},"end":{"row":105,"column":40}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":105,"column":40},"end":{"row":105,"column":41}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":105,"column":41},"end":{"row":105,"column":42}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":105,"column":42},"end":{"row":105,"column":43}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":105,"column":43},"end":{"row":105,"column":44}},"text":"h"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":105,"column":44},"end":{"row":105,"column":45}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":105,"column":45},"end":{"row":105,"column":46}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":105,"column":46},"end":{"row":105,"column":47}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":105,"column":47},"end":{"row":105,"column":48}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":105,"column":48},"end":{"row":105,"column":49}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":105,"column":49},"end":{"row":105,"column":50}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":105,"column":50},"end":{"row":105,"column":51}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":105,"column":51},"end":{"row":105,"column":52}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":105,"column":52},"end":{"row":105,"column":53}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":105,"column":53},"end":{"row":105,"column":54}},"text":"m"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":105,"column":54},"end":{"row":105,"column":55}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":105,"column":55},"end":{"row":105,"column":56}},"text":"w"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":105,"column":56},"end":{"row":105,"column":57}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":105,"column":57},"end":{"row":105,"column":58}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":105,"column":58},"end":{"row":105,"column":59}},"text":"h"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":105,"column":59},"end":{"row":105,"column":60}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":105,"column":60},"end":{"row":105,"column":61}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":105,"column":61},"end":{"row":105,"column":62}},"text":"h"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":105,"column":62},"end":{"row":105,"column":63}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":105,"column":63},"end":{"row":105,"column":64}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":105,"column":64},"end":{"row":105,"column":65}},"text":"u"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":105,"column":65},"end":{"row":105,"column":66}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":105,"column":66},"end":{"row":105,"column":67}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":105,"column":67},"end":{"row":105,"column":68}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":108,"column":150},"end":{"row":108,"column":153}},"text":"tid"},{"action":"insertText","range":{"start":{"row":108,"column":150},"end":{"row":108,"column":151}},"text":"u"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":108,"column":151},"end":{"row":108,"column":152}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":108,"column":152},"end":{"row":108,"column":153}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":108,"column":153},"end":{"row":108,"column":154}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":108,"column":154},"end":{"row":108,"column":155}},"text":"."}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":108,"column":155},"end":{"row":108,"column":156}},"text":"u"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":108,"column":156},"end":{"row":108,"column":157}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":108,"column":157},"end":{"row":108,"column":158}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":108,"column":158},"end":{"row":108,"column":159}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":108,"column":159},"end":{"row":108,"column":160}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":108,"column":160},"end":{"row":108,"column":161}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":108,"column":161},"end":{"row":108,"column":162}},"text":"m"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":108,"column":162},"end":{"row":108,"column":163}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":108,"column":163},"end":{"row":108,"column":164}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":108,"column":166},"end":{"row":108,"column":167}},"text":"$"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":108,"column":166},"end":{"row":108,"column":167}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":108,"column":166},"end":{"row":108,"column":167}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":108,"column":166},"end":{"row":108,"column":167}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":108,"column":166},"end":{"row":108,"column":167}},"text":"m"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":108,"column":166},"end":{"row":108,"column":167}},"text":"I"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":108,"column":166},"end":{"row":108,"column":167}},"text":"D"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":108,"column":167},"end":{"row":108,"column":168}},"text":"$"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":108,"column":167},"end":{"row":108,"column":168}},"text":"$"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":108,"column":166},"end":{"row":108,"column":167}},"text":"$"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":108,"column":167},"end":{"row":108,"column":168}},"text":"u"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":108,"column":168},"end":{"row":108,"column":169}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":108,"column":169},"end":{"row":108,"column":170}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":108,"column":170},"end":{"row":108,"column":171}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":108,"column":171},"end":{"row":108,"column":172}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":108,"column":172},"end":{"row":108,"column":173}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":108,"column":173},"end":{"row":108,"column":174}},"text":"m"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":108,"column":174},"end":{"row":108,"column":175}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":107,"column":38},"end":{"row":107,"column":39}},"text":"B"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":107,"column":39},"end":{"row":107,"column":40}},"text":"y"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":107,"column":40},"end":{"row":107,"column":41}},"text":"U"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":107,"column":41},"end":{"row":107,"column":42}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":107,"column":42},"end":{"row":107,"column":43}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":107,"column":43},"end":{"row":107,"column":44}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":98,"column":54},"end":{"row":98,"column":55}},"text":":"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":98,"column":54},"end":{"row":98,"column":55}},"text":";"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":110,"column":0},"end":{"row":110,"column":2}},"text":"\t}"},{"action":"removeLines","range":{"start":{"row":85,"column":0},"end":{"row":110,"column":0}},"nl":"\n","lines":["\t * Gets a json object with all team members of a specific user, and the privileges of the selected user.","\t * @param String $username the username of the user for who the profile is loaded for.","\t * @returns JSON-Object that contains the profile data for a user, a list of all team members, the selected user, and admin privileges.","\t */","\tpublic static function getUserProfile($username){","\t\t$res = DatabaseUtil::executeQueryAsJSON(\"SELECT DISTINCT * FROM `user` INNER JOIN (address) ON address.username = user.username WHERE user.username = '$username'\");","\t\t$json = json_decode($res);","\t\t//if a person does not have any address data.","\t\tif(count($json)<1){","\t\t\t$res = DatabaseUtil::executeQueryAsJSON(\"SELECT * FROM `user` WHERE username='$username'\");","\t\t}","\t\t$admin = AdminUtil::getAdmin($_SESSION[\"user\"][\"username\"]);","\t\t$teamList = DatabaseUtil::executeQueryAsJSON(\"SELECT * FROM `role` WHERE username='$username'\");","\t\t$teamMembers = self::getTeamMembersByUser($username);","\t\treturn \"{\\\"selectedUser\\\": \\\"$username\\\", \\\"adminData\\\": $admin, \\\"profileData\\\": $res, \\\"teamList\\\":$teamList , \\\"teamMembers\\\": $teamMembers}\";","\t}","\t","\t/**","\t * Get a list of all users who are in the team specified with the specified user.","\t * @param String $username the name of the user whos members are accessed.","\t * @returns JSON-Array of all users that share a team with the user.","\t */","\tpublic static function getTeamMembersByUser($username){","\t\t$res = DatabaseUtil::executeQueryAsJSON(\"SELECT user.username, firstname, name FROM `role` INNER JOIN `user` ON (user.username=role.username) WHERE user.usernamer='$username'\");","\t\treturn $res;"]},{"action":"removeText","range":{"start":{"row":84,"column":1},"end":{"row":84,"column":4}},"text":"/**"},{"action":"removeText","range":{"start":{"row":84,"column":1},"end":{"row":85,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":84,"column":1},"end":{"row":84,"column":4}},"text":"/**"},{"action":"insertText","range":{"start":{"row":84,"column":4},"end":{"row":85,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":85,"column":0},"end":{"row":110,"column":0}},"lines":["\t * Gets a json object with all team members of a specific user, and the privileges of the selected user.","\t * @param String $username the username of the user for who the profile is loaded for.","\t * @returns JSON-Object that contains the profile data for a user, a list of all team members, the selected user, and admin privileges.","\t */","\tpublic static function getUserProfile($username){","\t\t$res = DatabaseUtil::executeQueryAsJSON(\"SELECT DISTINCT * FROM `user` INNER JOIN (address) ON address.username = user.username WHERE user.username = '$username'\");","\t\t$json = json_decode($res);","\t\t//if a person does not have any address data.","\t\tif(count($json)<1){","\t\t\t$res = DatabaseUtil::executeQueryAsJSON(\"SELECT * FROM `user` WHERE username='$username'\");","\t\t}","\t\t$admin = AdminUtil::getAdmin($_SESSION[\"user\"][\"username\"]);","\t\t$teamList = DatabaseUtil::executeQueryAsJSON(\"SELECT * FROM `role` WHERE username='$username'\");","\t\t$teamMembers = self::getTeamMembersByUser($username);","\t\treturn \"{\\\"selectedUser\\\": \\\"$username\\\", \\\"adminData\\\": $admin, \\\"profileData\\\": $res, \\\"teamList\\\":$teamList , \\\"teamMembers\\\": $teamMembers}\";","\t}","\t","\t/**","\t * Get a list of all users who are in the team specified with the specified user.","\t * @param String $username the name of the user whos members are accessed.","\t * @returns JSON-Array of all users that share a team with the user.","\t */","\tpublic static function getTeamMembersByUser($username){","\t\t$res = DatabaseUtil::executeQueryAsJSON(\"SELECT DISTINCT user.username AS username, user.firstname AS firstname, user.name AS name FROM `role` INNER JOIN (user, teams) ON (user.username=role.username AND role.tid=teams.id) WHERE teams.id IN (SELECT role.tid FROM role WHERE username='$username')\");","\t\treturn $res;"]},{"action":"insertText","range":{"start":{"row":110,"column":0},"end":{"row":110,"column":2}},"text":"\t}"}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":110,"column":2},"end":{"row":110,"column":2},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":408,"mode":"ace/mode/php"}},"timestamp":1411732817000,"hash":"1414939bdbd1ca6b4a11ac3b829020392a9ffc16"}